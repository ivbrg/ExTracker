{% load static %}

<link rel="stylesheet" href="{% static 'tracker/style.css' %}" />
<link rel="stylesheet" href="{% static 'tracker/pagination.css' %}">

<h1 class="welcome">Welcome, {{ request.user.username }}</h1>

<body>
<h2>Your Balance</h2>
<p>Your current balance is: {{ balance }}</p>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{% static 'js/app.js' %}"> </script>

<button onclick="openTransactionPopup('deposit', this)">Deposit</button>
<button onclick="openTransactionPopup('withdrawal', this)">Withdraw</button>



<h2>Transaction History</h2>
<div class="transaction-controls">
    <label for="per-page">Show:</label>
    <select id="per-page" onchange="changePerPage(this)">
        <option value="10" {% if per_page == '10' %}selected{% endif %}>10</option>
        <option value="25" {% if per_page == '25' %}selected{% endif %}>25</option>
        <option value="50" {% if per_page == '50' %}selected{% endif %}>50</option>
    </select>
</div>

<table>
    <thead>
        <tr>
            <th>Date</th>
            <th>Description</th>
            <th>Amount</th>
            <th>Type</th>
        </tr>
    </thead>
    <tbody>
        {% for transaction in page_obj %}
        <tr>
            <td>{{ transaction.date }}</td>
            <td>{{ transaction.description }}</td>
            <td>{{ transaction.amount }}</td>
            <td>{{ transaction.get_transaction_type_display }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- Pagination Controls -->
<div class="pagination">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?page=1&per_page={{ per_page }}">First</a>
            <a href="?page={{ page_obj.previous_page_number }}&per_page={{ per_page }}">Previous</a>
        {% endif %}

        <span>Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}&per_page={{ per_page }}">Next</a>
            <a href="?page={{ page_obj.paginator.num_pages }}&per_page={{ per_page }}">Last</a>
        {% endif %}
    </span>
</div>
<script src="{% static 'js/pagination.js' %}"></script>

<!--
<table>
    <thead>
        <tr>
            <th>Date</th>
            <th>Type</th>
            <th>Amount</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        {% for transaction in transactions %}
        <tr>
            <td>{{ transaction.timestamp }}</td>
            <td>{{ transaction.get_transaction_type_display }}</td>
            <td>{{ transaction.amount }}</td>
            <td>{{ transaction.description }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4">No transactions found.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
-->

</body>